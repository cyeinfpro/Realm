{% extends "base.html" %}
{% block content %}
<div id="toast" class="toast" style="display:none;"></div>

<div class="netmon-wallbar" role="banner">
  <div class="netmon-wall-left">
    <div class="netmon-wall-clock" id="netmonWallClock">--:--:--</div>
    <div class="netmon-wall-sub muted sm" id="netmonWallSub">加载中…</div>
  </div>

  <div class="netmon-wall-mid">
    <div class="netmon-wall-badges" aria-label="status summary">
      <span class="badge ok" id="netmonWallOk">OK 0</span>
      <span class="badge warn" id="netmonWallWarn">WARN 0</span>
      <span class="badge crit" id="netmonWallCrit">CRIT 0</span>
      <span class="badge" id="netmonWallTotal">TOTAL 0</span>
    </div>
  </div>

  <div class="netmon-wall-right">
    <div class="netmon-wall-ctrl">
      <label class="label sm" for="netmonViewWindow" style="margin:0;">窗口</label>
      <input class="input sm" id="netmonViewWindow" type="number" min="1" max="1440" value="10" style="width:90px;">
    </div>

    <div class="netmon-wall-ctrl">
      <label class="label sm" for="netmonFilter" style="margin:0;">筛选</label>
      <select class="select sm" id="netmonFilter" style="min-width:150px;">
        <option value="all">全部</option>
        <option value="abnormal">仅异常（WARN/CRIT）</option>
        <option value="crit">仅严重（CRIT）</option>
        <option value="enabled">仅启用</option>
        <option value="disabled">仅停用</option>
      </select>
    </div>

    <div class="netmon-wall-ctrl">
      <label class="label sm" for="netmonResolution" style="margin:0;">精度</label>
      <select class="select sm" id="netmonResolution" style="min-width:140px;">
        <option value="auto">自动</option>
        <option value="30000">30s</option>
        <option value="60000">1m</option>
        <option value="300000">5m</option>
        <option value="900000">15m</option>
      </select>
    </div>

    <div class="netmon-wall-ctrl">
      <label class="label sm" for="netmonWallRotate" style="margin:0;">轮播</label>
      <select class="select sm" id="netmonWallRotate" style="min-width:110px;">
        <option value="0">关闭</option>
        <option value="10">10s</option>
        <option value="20">20s</option>
        <option value="30">30s</option>
        <option value="60">60s</option>
      </select>
    </div>

    <div class="netmon-wall-ctrl">
      <label class="label sm" for="netmonAutoRefresh" style="margin:0;">刷新</label>
      <select class="select sm" id="netmonAutoRefresh" style="min-width:120px;">
        <option value="on">开启（2s）</option>
        <option value="off">关闭</option>
      </select>
    </div>

    <button class="btn sm ghost" type="button" id="netmonRefreshBtn">刷新</button>
    <button class="btn sm" type="button" id="netmonWallFullscreen">全屏</button>
    <a class="btn sm secondary" href="/netmon">退出</a>
  </div>
</div>

<div class="muted sm" id="netmonStatus" style="display:none;"></div>
<div id="netmonCharts" class="netmon-charts netmon-wall-grid"></div>

<div class="card netmon-empty" id="netmonEmpty" style="display:none;">
  <div class="card-title">暂无监控</div>
  <div class="card-sub">请先在管理页创建监控。</div>
  <div style="margin-top:10px;"><a class="btn sm" href="/netmon">进入管理页</a></div>
</div>

{% endblock %}

{% block scripts %}
<script src="/static/app.js?v=66.0"></script>
<script>
window.__NETMON_NODE_GROUPS__ = [];
window.__NETMON_READONLY__ = true;
window.__NETMON_WALLBOARD__ = true;
window.addEventListener('DOMContentLoaded', ()=>{
  try{ document.body.classList.add('netmon-wall'); }catch(_e){}
  initNetMonPage();
});
</script>
{% endblock %}
